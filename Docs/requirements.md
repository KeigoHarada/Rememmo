# Rememmo アプリ 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名

Rememmo - Git管理機能付きメモアプリ

### 1.2 プロジェクト概要

ユーザーがGitの知識なしでバージョン管理の恩恵を受けられるメモアプリ。
各メモに対してGitリポジトリを作成し、自動的にコミット履歴を管理する。
なるべくシンプルにして、gitを使ったことがないユーザーでも覚えることがほぼないアプリ。
触ればすぐに使いこなすことができることを目指す。
markdown形式で書くことができて、自動でレンダリングされることを目指す。

### 1.3 開発期間

2025年7月 - 2025年8月

### 1.4 技術スタック

- **フレームワーク**: SwiftUI
- **データ管理**: SwiftData
- **Git管理**: SwiftGit2

## 2. 機能要件

### 2.1 基本メモ機能

#### 2.1.1 メモ作成・編集・削除

- [x] **F-001**: 新規メモの作成
  - タイトルと内容を入力可能
  - 空のメモも作成可能
  - 作成日時を自動記録

- [x] **F-002**: メモの編集
  - タイトルと内容の編集
  - 更新日時を自動記録
  - 編集履歴の保持

- [x] **F-003**: メモの削除
  - スワイプ削除対応
  - 削除確認ダイアログ
  - 関連データの完全削除

#### 2.1.2 メモ一覧・表示

- [x] **F-004**: メモ一覧表示
  - タイトル、内容プレビュー、更新日時を表示
  - 時系列順（最新順）で表示
  - 空のメモは「無題」として表示

- [x] **F-005**: メモ詳細表示
  - タイトルと内容の完全表示
  - 作成日時・更新日時の表示
  - 編集モードへの切り替え

#### 2.1.3 検索機能

- [x] **F-006**: メモ検索
  - タイトルと内容での全文検索
  - リアルタイム検索結果表示
  - 検索結果のハイライト表示

#### 2.1.4 データ永続化

- [x] **F-007**: SwiftDataによる永続化
  - メモデータの自動保存
  - アプリ再起動時のデータ復元
  - データの整合性保証

### 2.2 Git機能

#### 2.2.1 リポジトリ管理

- [ ] **F-008**: メモごとのGitリポジトリ作成
  - メモ作成時に自動的にGitリポジトリを初期化
  - リポジトリはアプリのDocumentsディレクトリ内に保存
  - メモ削除時にリポジトリも削除

- [ ] **F-009**: リポジトリ状態管理
  - リポジトリの存在確認
  - リポジトリの整合性チェック
  - 破損リポジトリの修復機能

#### 2.2.2 コミット機能

- [ ] **F-010**: 自動コミット
  - メモ編集保存時に自動コミット
  - コミットメッセージの自動生成
  - コミット失敗時のエラーハンドリング

- [ ] **F-011**: コミットメッセージ生成
  - タイトル変更時: 「タイトルを更新」
  - 内容変更時: 「内容を更新」
  - 両方変更時: 「タイトルと内容を更新」
  - 変更なし時: 「変更なし」

#### 2.2.3 コミット履歴

- [ ] **F-012**: コミット履歴表示
  - 時系列順（最新順）で表示
  - コミットメッセージ、日時、作者を表示
  - コミット間の関係性表示

- [ ] **F-013**: コミット詳細表示
  - 特定コミットの内容プレビュー
  - コミット情報の詳細表示
  - 復元機能へのアクセス

#### 2.2.4 差分表示

- [ ] **F-014**: 差分表示機能
  - 現在の状態と前回コミットの差分
  - 任意の2つのコミット間の差分
  - 行単位での追加・削除・変更の色分け表示

- [ ] **F-015**: 差分UI
  - 追加行: 緑色で表示
  - 削除行: 赤色で表示
  - 変更行: 黄色で表示
  - 行番号の表示

#### 2.2.5 復元機能

- [ ] **F-016**: コミットからの復元
  - 任意のコミットの状態に復元
  - 復元前に現在の状態を自動保存
  - 復元後のメモ詳細画面への遷移

- [ ] **F-017**: 復元確認
  - 復元前の確認ダイアログ
  - 復元内容のプレビュー
  - 復元操作の取り消し機能

#### 2.2.6 ブランチ機能

- [ ] **F-018**: ブランチ作成
  - 任意のコミットからブランチを作成
  - ブランチ名の自動生成
  - ブランチの説明機能

- [ ] **F-019**: ブランチ管理
  - ブランチ間の切り替え
  - 現在のブランチ表示
  - ブランチの削除機能

- [ ] **F-020**: ブランチマージ
  - ブランチ間のマージ機能
  - マージコンフリクトの解決
  - マージ履歴の表示

### 2.3 Markdown機能

#### 2.3.1 Markdown編集

- [ ] **F-021**: Markdown記法対応
  - 基本的なMarkdown記法のサポート
  - リアルタイムプレビュー
  - シンタックスハイライト

#### 2.3.2 Markdownレンダリング

- [ ] **F-022**: 自動レンダリング
  - 編集時のリアルタイムレンダリング
  - 表示モードでの完全レンダリング
  - 画像、リンク、テーブルの表示

#### 2.3.3 拡張機能

- [ ] **F-023**: 画像対応
  - 画像の挿入・表示
  - 画像のリサイズ機能
  - 画像のGit管理

### 2.4 UI/UX機能

#### 2.4.1 ナビゲーション

- [x] **F-024**: 直感的なナビゲーション
  - メモ一覧 → メモ詳細 → 編集
  - コミット履歴 → コミット詳細
  - 戻るボタンとスワイプ戻り

#### 2.4.2 レスポンシブデザイン

- [x] **F-025**: デバイス対応
  - iPhone、iPad対応
  - 画面サイズに応じたレイアウト調整
  - 横画面・縦画面対応

### 2.5 データ管理機能

#### 2.5.1 バックアップ・復元

- [ ] **F-027**: データバックアップ
  - iCloud同期対応
  - 手動バックアップ機能
  - バックアップの復元機能

#### 2.5.2 データ移行

- [ ] **F-028**: データ移行
  - 既存データのGit移行
  - 外部データのインポート
  - データのエクスポート

### 2.6 設定機能

#### 2.6.1 アプリ設定

- [ ] **F-029**: 基本設定
  - テーマ設定（ライト・ダーク・自動）
  - フォントサイズ設定
  - 自動保存間隔設定

#### 2.6.2 Git設定

- [ ] **F-030**: Git設定
  - ユーザー名・メールアドレス設定
  - コミットメッセージテンプレート
  - 自動コミットの有効/無効設定

## 3. 詳細要件

### 3.1 基本メモ機能

#### 3.1.1 メモ作成・編集

- **R-001**: タイトルは最大100文字まで
- **R-002**: 内容は最大10,000文字まで
- **R-003**: 空のメモも作成可能
- **R-004**: 編集時は自動保存（5秒間隔）

#### 3.1.2 検索機能

- **R-005**: 検索は大文字小文字を区別しない
- **R-006**: 検索結果は最大100件まで表示
- **R-007**: 検索履歴の保存（最大10件）

### 3.2 Git機能

#### 3.2.1 リポジトリ管理

- **R-008**: メモ作成時に自動的にGitリポジトリを初期化
- **R-009**: メモ削除時にリポジトリも削除
- **R-010**: リポジトリはアプリのDocumentsディレクトリ内に保存

#### 3.2.2 コミット機能

- **R-011**: メモ編集保存時に自動コミット
- **R-012**: コミットメッセージは変更内容に基づいて自動生成
- **R-013**: コミット履歴は時系列順で表示

#### 3.2.3 差分表示

- **R-014**: 現在の状態と前回コミットの差分を表示
- **R-015**: 任意の2つのコミット間の差分を表示
- **R-016**: 差分は行単位で追加・削除・変更を色分け表示

#### 3.2.4 復元機能

- **R-017**: 任意のコミットの状態に復元可能
- **R-018**: 復元前に現在の状態を自動保存
- **R-019**: 復元後はメモ詳細画面に遷移

#### 3.2.5 ブランチ機能

- **R-020**: 任意のコミットからブランチを作成
- **R-021**: ブランチ間の切り替え
- **R-022**: ブランチのマージ機能

### 4. 非機能要件

#### 4.1 パフォーマンス

- **NF-001**: メモ一覧の表示は1秒以内
- **NF-002**: コミット操作は3秒以内
- **NF-003**: 差分表示は2秒以内
- **NF-004**: 検索結果の表示は1秒以内

#### 4.2 ユーザビリティ

- **NF-005**: Gitの知識なしで操作可能
- **NF-006**: 直感的なUI/UX
- **NF-007**: エラー時の適切なフィードバック
- **NF-008**: 学習コストの最小化

## 5. 制約事項

### 5.1 技術制約

- iOS 17.0以上
- SwiftUI必須
- SwiftGit2ライブラリ使用
- App Store審査対応

### 5.2 ビジネス制約

- ユーザーはGitの知識を前提としない
- 無料アプリとして提供
- オープンソース化を検討

## 6. 成功基準

### 6.1 機能基準

- [ ] すべての基本要件が実装されている
- [ ] エラーが発生しない
- [ ] パフォーマンス要件を満たしている

### 6.2 ユーザビリティ基準

- [ ] 直感的に操作できる
- [ ] Gitの知識なしでgit基本機能を使用できる
- [ ] ユーザーフィードバックが良好
